\chapter{Stand van zaken}
\label{ch:stand-van-zaken}

% Tip: Begin elk hoofdstuk met een paragraaf inleiding die beschrijft hoe
% dit hoofdstuk past binnen het geheel van de bachelorproef. Geef in het
% bijzonder aan wat de link is met het vorige en volgende hoofdstuk.

% Pas na deze inleidende paragraaf komt de eerste sectiehoofding.

Om de verschillende 'ontgoogle' manieren met elkaar te kunnen vergelijken, moeten we eerst wat dieper ingaan op de verschillende Google componenten die te vinden zijn binnen het Android besturingssysteem en hoe deze zoveel mogelijk te limiteren en/of uit te schakelen zijn. In dit hoofdstuk zult u meer te weten komen over wat er precies gebeurt achter de schermen van Android en hoe pecies een 'ontgoogling' kan gebeuren.

\section{Google componenten binnen Android}
%TODO voornamelijk weg, niet waterdicht genoeg
Google software binnen het Android besturing bestaat voornamelijk uit de 'Google Play-Services', het achterliggende 'brein' van Google, en Google applicaties, zoals GMail, Google Play Store, etc.

\subsection{Google Play-Services}

Aan het hart van het Android besturingssysteem liggen de 'Google Play-Services'. Deze services zijn zeer nauw met het Android besturingssysteem geïntegreerd, en bieden een bundel van API's aan. \autocite{marshall_google-play-services}. Een API of 'Application Program Interface' is kort gezegd een set van hulpmiddelen die het voor applicatie-ontwikkelaars makkelijker maakt om applicaties te ontwikkelen. \autocite{beal_api}

AOSP, ook gekend als Android Open Source Project, is de basis van het Android besturingssysteem. Zoals de naam zelf al zegt, is dit project volledig 'open-source'. Dit houdt in dat iedereen vrij is om de broncode te gebruiken en aan te passen. 

De Android versie die in de meeste gevallen op mensen hun smartphone draait, is echter niet volledig 'open-source' maar ook voor een deeltje 'closed-source'. Smartphone producenten voeren vaak nog wijzigen door op AOSP, die invloed hebben op hoe visuele elementen er uitzien, extra functionaliteiten toevoegen en zorgen dat alle hardware die gebruikt wordt binnen het apparaat ook ondersteund wordt door apparaat-specifieke drivers. Zo ontwikkelt Xiaomi voor hun apparaten een eigen versie van Android die ze MIUI noemen, OnePlus ontwikkelt een eigen versie van Android die ze OxygenOS noemen, LG heeft LG UX, etc. Voor de westerse markt worden de Google Apps vaak opgenomen in het besturingssysteem. Google zelf biedt ook Android telefoons aan, zoals de reeds verouderde 'Nexus' apparaatlijn en de huidige 'Pixel' apparaatlijn. Zelf het besturingsysteem dat op deze apparaten draait is niet onaangepast, ook al wordt deze vaak als de 'schoonste' versie van Android beschouwd. Binnen hun versie van Android zijn ook de gepatenteerde Google Apps aanwezig \autocite{torres_stockandroid}. Steeds meer producenten bieden apparaten aan met een zo min mogelijk aangepaste versie van Android, om zo beroep te doen op mensen die op zoek zijn naar de 'stock experience'. Via het 'Android One' programma dat Android aanbiedt, is het ook makkelijker voor producenten om dit aan te bieden. Ook hierin zijn Google Apps inbegrepen. \autocite{android_androidone}.  Dit deel omvat dan alle applicaties van Google zelf, bv. GMail, Google Maps, en de onderliggende 'Google Play-Services' \autocite{amadeo_open-source}.

AOSP biedt een bundel API's  aan, maar Google zelf adviseert om de API's van de Google Play-Services te gebruiken. Deze zijn immers een stuk makkelijker te gebruiken zijn, en zorgen ervoor dat applicaties niet rechtstreeks afhankelijk zijn van Android besturingssysteem updates. Deze API's, zijn dan ook 'closed-source', tegenover de API's van AOSP, die 'open-source' zijn \autocite{marshall_google-play-services} . 

Een voorbeeld hiervan is de locatie service. AOSP biedt een 'Location API' aan. Wanneer een applicatie gebruik maakt van deze API, moet er expliciet gekozen worden tussen 3 'location providers'. Elk van deze gebruikt een verschillende manier om de locatie van een gebruiker te bepalen \autocite{android_location-strategies}. De GPS provider gebruikt de fysieke GPS chip binnen het apparaat, en kan hierdoor ook de meest accurate locatiegegevens teruggeven, maar deze verbruikt ook het meeste energie. De netwerk provider maakt gebruik van de GPS chip, samen met gegevens van het mobiele netwerk om zo een snelle initiële verbinding te krijgen. De nauwkeurigheid van de locatiegegevens die hier worden teruggeven is lager, maar deze methode zorgt wel voor een lager energieverbruik. Tenslotte is er ook de passieve provider. Deze zal, in tegenstelling tot de andere providers, niet actief zoeken naar een verbinding. In plaats daarvan, maakt deze gebruik van locatiegegevens die verschaft werden door de andere providers, wanneer deze door andere applicaties worden aangesproken \autocite{idris_location-providers}. De Google Play Serivces Location API heeft als voordeel dat ontwikkelaars niet expliciet meer moeten kiezen tussen één van deze drie providers. Deze keuze wordt automatisch gemaakt zodat nauwkeurigheid en energieverbruik geoptimaliseerd wordt. \autocite{android_location-strategies}

\blockcquote{android_location-strategies}{
    The Google Location Services API, part of Google Play Services, provides a more powerful, high-level framework that automatically handles location providers, user movement, and location accuracy. It also handles location update scheduling based on power consumption parameters you provide. In most cases, you'll get better battery performance, as well as more appropriate accuracy, by using the Location Services API.
}

Steeds meer en meer open-source applicaties, die voorheen te vinden waren binnen AOSP, worden achtergelaten en vervangen door een closed-source versie op de Google Play Store, de applicatie van Google waarmee gebruikers applicaties kunnen downloaden en installeren. Ook de Play Store maakt gebruik van de Google Play-Services om applicaties automatisch te kunnen updaten. Op deze manier probeert Google haar eigen applicaties zoveel mogelijk macht te geven tegenover de 'open-source' applicaties binnen AOSP. \autocite{amadeo_open-source}

Doordat zeer veel applicaties dus rechtstreeks afhangen van de Google Play-Services, zullen veel applicaties ook regelrecht niet meer zoals gewenst functioneren wanneer de Play-Services niet aanwezig zijn of deze niet beschikt over de nodige toestemmingen \autocite{marshall_google-play-services}. Android handhaaft een toestemmingssysteem waarbij elke applicatie eerst toestemming moet vragen voordat deze aan gevoelige gebruikersdata kan. Voorbeelden van dergelijke machtigingen zijn toegang tot de camera, contacten en SMS informatie \autocite{android_permissions}. Standaard krijgt Google Play Services, als enige applicatie, alle machtigingen toegekend, zoals te zien in figuur \ref{fig:permissions1}. Wanneer er geprobeerd word om hier de machtigingen in te perken, wordt er ook gemeld dat dit kan leiden tot het verstoren van basisfunctionaliteiten, zoals te zien in figuur \ref{fig:permissions1}. \textquote{Als je deze machtiging weigert, kan het zijn dat basisfuncties van je apparaat niet meer werken zoals bedoeld.}.

\begin{figure}
    \includegraphics[width=0.4\textwidth]{img/machtigingen.jpg}
    \caption{Screenshot van vereiste machtigingen van Google Play Services}
    \label{fig:permissions1}
\end{figure}

\begin{figure}
    \includegraphics[width=0.4\linewidth]{img/machtigingen_melding.jpg}
    \caption{Screenshot van melding bij inperken van machtigingen van Google Play Services}
    \label{fig:permissions2}
\end{figure}

\subsection{Google Applicaties}

Een ander Google component binnen Android zijn alle Google applicaties. Afhankelijk van de fabrikant van de smartphone, zal er een heel pakket aan Google applicaties samen met de Google Play-Services, al dan niet geïnstalleerd zijn. Google applicaties zijn als systeem-applicaties geïnstalleerd, wat betekent dat ze zonder software aanpassingen niet van  het apparaat kunnen verwijderd worden. Wel is het mogelijk om deze applicaties 'uit te schakelen'. Dit houdt in dat ze niet meer op de achtergrond kunnen worden uitgevoerd, en dus ook geen meldingen kunnen sturen.

Applicaties die hier binnenvallen zijn GMail, Google, Google Play Films, Google Play Store, etc.

\section{Mogelijke ontgoogle manieren}

Het doel van het ontgooglen is dan om de Google software zodanig te vermijden zodat je op  een zo min mogelijke manier nog vastzit aan Google. Dit kan mogelijks op enkele manieren gebeuren, die zullen worden besproken in volgende subsecties.

\subsection{Zachte ingrepen}

Onder zachte ingrepen verstaan we de methoden die enkel gebruik maken van opties die ons rechstreeks door Android of Google worden aangeboden, zonder softwarematige wijzigingen aan te brengen aan het besturingssysteem.

\subsubsection{Verwijderen van Google account op het apparaat}

Gebruik van een Google account word aangeraden bij het gebruik van een Android telefoon, maar is niet verplicht. Bij het instellen van het Android besturingssysteem kunt u de stap om in te loggen bij Google gewoon overslaan. Het is ook mogelijk om een ingelogde Google account later te verwijderen. Enkele applicaties zullen niet werken of gelimiteerde functionaliteit hebben hierdoor, maar mogelijk wilt u deze Google applicaties niet gebruiken als u als doel 'ontgooglen' hebt.

\subsubsection{Niet gebruiken van Google applicaties}
Door Google applicaties regelrecht niet te gebruiken, is de grip van Google op Android telefoons al direct een heel stuk zwakker.
Zoals eerder al gezegd, is het niet mogelijk om Google applicaties te verwijderen aangezien ze geïnstalleerd zijn als systeem-applicaties. Ze kunnen echter wel uitgeschakeld worden. Door Google applicaties niet te gebruiken missen we wel redelijk wat basisfunctionaliteiten. De applicaties die dan worden misgelopen, zijn onder andere Google Maps (online kaartendienst), GMail (mail client), Google Foto's (applicatie om foto's bij te houden en te synchroniseren met de cloud), Chrome (internetbrowser), YouTube (online videoplatform), Google Calendar (agenda applicatie), Google Keyboard (toetsenbord), Google Play Store (app-store), etc.  Gelukkig biedt het internet meer dan genoeg alternatieven voor elke Google applicatie. Deze methode zorgt er niet voor dat Google van het besturingssysteem verbannen wordt en het apparaat zal nog steeds communiceren met Google.

\subsubsection{Uitschakelen van persoonlijke advertenties}
Een mogelijkheid die Google ons geeft, is het uitschakelen van persoonlijke advertenties. Door gebruik te maken van een 'advertising ID' kan Google externen toegang geven tot gebruikersinformatie zoals locatie en apps die gebruikt worden. Google geeft ons de mogelijkheid om toegang tot deze 'advertising ID' uit te schakelen. Dit kan een gebruiker doen door eerst naar het instellingen menu te navigeren, 'Google' te selecteren, en vervolgens 'Advertenties' te selecteren. Hier kan je je door middel van een schuifbalkje afmelden voor personalisatie van advertenties. \autocite{knight_degoogle}

\subsubsection{Veranderen van de standaard DNS server}
Een DNS server is een server, die wanneer je naar een bepaalde site surft, de vertaalstap maakt tussen een domein en het IP adres van de bijhorende webruimte. Als de DNS server van een Android smartphone is ingesteld op de DNS server van Google, kan google uw surfgedrag opvolgen om zo een profiel op te bouwen voor adverteerders. Door de DNS server aan te passen naar één van uw provider of andere aanbieder, kunt u dit voorkomen.

Tot Android 8.0, ook wel gekend als Android Oreo, was er geen mogelijkheid om de DNS server bij gebruik van het mobiele netwerk aan te passen, en enkel gelimiteerde mogelijkheden om deze aan te passen bij gebruik van Wi-Fi. Er bestaan echter wel applicaties die door middel van een 'omleiding' en het gebruik van de VPN functie op Android toch hetzelfde resultaat kunnen bekomen \autocite{knight_degoogle}. 

Sinds Android 9.0, ook wel gekend als Android Pie, bestaat DNS-over-TLS. In de instellingen van een Android telefoon kan deze instelling gevonden worden onder 'Wi-FI \& internet' en vervolgens 'Privé-DNS'. Hier kan systeem-wijd een privé-DNS-provider worden ingesteld. Bij het gebruiken van deze functie wordt door middel van encryptie de beveiliging en privacy tussen de client en de DNS-server verbeterd. \autocite{google_dns-tls}

\subsection{Harde ingrepen}

Onder harde ingrepen verstaan we de methoden die gebruik maken van software aanpassingen om zo Google zo veel mogelijk te verbannen.

\subsubsection{Installeren van een Custom ROM}
Een 'Custom Android ROM' verwijst naar de versie van AOSP waarop een bepaalde smartphone draait \autocite{custom-rom}. De versie van Android die vooraf geïnstalleerd is op een smartphone wordt de 'stock ROM' genoemd. De meeste stock ROM's bevatten standaard reeds de Google Play-Services en bijhorende Google applicaties, maar dit is zeker geen vereiste voor het android besturingssysteem. In China is het gebruik van Google verboden, en bijgevolg bevatten toestellen die bedoeld zijn voor de Chinese markt geen enkele verwijzing naar Google software. Doordat de Google Play Store niet kan werken zonder de Google Play-Services, moeten chinese bedrijven een eigen 'app store' implementeren om deze te vervangen. Hetzelfde is waar voor custom ROM's. De ontwikkelaar kan zelf kiezen of hij/zij google software wilt meeleveren in zijn versie van het besturingssysteem.

Om een custom ROM te installeren, zijn er wel enkele vereisten waaraan een apparaat moet voldoen. Ten eerste moet het apparaat beschikken over een 'unlocked bootloader'. Standaard wordt een Android apparaat geleverd met een 'locked bootloader'. Het hangt dan af van de fabrikant hoe het al dan niet mogelijk is om deze bootloader te unlocken. Het proces om dit te doen verschilt van fabrikant tot fabrikant, en bij meeste fabrikanten houdt dit proces ook in dat alle data op het apparaat wordt gewist. De tweede vereiste om een custom ROM te kunnen installeren is dat er 'custom recovery' geïnstalleerd is. Dit is een gelimiteerde opstartmodus die ons toelaat om de 'custom ROM' te installeren \autocite{hoffman_custom-recovery}.

Als er binnen de custom ROM geen Google software te vinden is, kan een Android telefoon die deze versie van het besturingssysteem draait als 'ontgoogelt' beschouwd worden. Dit betekent echter niet dat alle functionaliteiten die voordien werkten, nog steeds allemaal zullen werken. Wanneer applicatie-ontwikkeleraars kiezen om tijdens de ontwikkeling verder te werken met een API die wordt aangeboden door de Google Play-Services, en niet op een API van AOSP, dan zal deze applicatie hoogstwaarschijnlijk niet werken naar behoren, of zelfs direct crashen wanneer deze geopend wordt.


Desalniettemin, bestaat er een open-source implementatie van de Google Play-Services, genaamd microG. Wanneer deze geïnstalleerd wordt bovenop een Google-loze custom ROM, zou het grootste deel van de verloren functionaliteiten hersteld worden. De motivatie voor dit project staat zeer duidelijk uitgelegd op hun site, en luidt als volgt. \blockcquote{microg}{
    The linux-based open-source mobile operating system Android is not only the most popular mobile operating system in the world, it’s also on the way to becoming a proprietary operating system. How is that?
    
    While the core operating system is still released as part of the Android Open Source Project, the majority of core apps are not. It gets worse: More and more libraries and APIs are only available on phones that run various Google apps pre-installed, effectively locking third-party apps to the Google ecosystem. For these reasons Android is described as being a “look but don’t touch” kind of open.
    
    At this point, several popular open-source applications already require some of Google’s proprietary libraries to be installed. Increasing demand in the free software community in addition to severe problems in Google’s proprietary software discovered by the Android modding community, have led to the development of a free software clone of Google’s proprietary core libraries and applications - the microG Project was born.
    
    Although most microG components are far from complete, users are amazed by the results. Free software users got extended application support, privacy-caring users can reduce or monitor data that is sent to Google and especially older phones can expect some battery life improvements. microG is not only used on real devices, but also replaces Google tools in test emulators and is even used in virtual mobile infrastructure.
}
Zoals hierboven vermeld, probeert microG een vervanging te zijn voor de gesloten software van Google, de Google Play-Services. Ook wordt er gezegd dat de implementatie van de microG componenten verre van compleet zijn. Het feit dat microG de functionaliteit van de Google Play-Services wilt nabootsen, impliceert ook dat de nieuwste functies niet direct beschikbaar zullen zijn binnen dit alternatief. Naarmate de ontwikkelaar-gemeenschap achter dit project blijft groeien zal deze functionele achterstand wel inkrimpen.

MicroG maakt het mogelijk om terug de Google Play Store te gebruiken, maar biedt ook een aparte applicatie aan genaamd 'FakeStore'. Deze zorgt ervoor dat andere applicaties denken dat de Play Store aanwezig is, terwijl dit natuurlijk niet zo is. Verder biedt deze applicatie niets van functionaliteit. Alternatieve app-stores zoals F-Droid of de Yalp Store zijn ook mogelijke opties. \autocite{shadow53_play-store}

\paragraph*{SafetyNet}

Aan bovenstaande methode zijn er ook negatieve kanten. Android heeft namelijk veiligheidsmaatregelen getroffen met betrekking tot het blokkeren van veiligheidsrisico's, 'sjoemelen' met het apparaat, kwaadaardige applicaties en 'nep' gebruikers \autocite{android_safetynet}. Dit systeem heet SafetyNet, en maakt deel uit van de Google Play Services. App-ontwikkelaars kunnen via de SafetyNet Attestation API nagaan op welk niveau aan de systeem integriteits controle voldaan wordt. Op basis van deze informatie kunnen bepaalde functies binnen de applicatie geblokkeerd worden. Het is ook mogelijk dat de volledige applicatie onbruikbaar wordt. Denk hier bijvoorbeeldt aan het bekende spel 'Pokemon GO', die het spel onspeelbaar maakt op apparaten die niet aan de SafetyNet controle voldoen. In de Belfius mobiele bankier-applicatie is het bijvoorbeeld niet mogelijk om vingerafdruk-authenticatie te gebruiken op zo'n apparaten. Ook de Play Store kan op basis van deze data het installeren van specifieke applicaties volledig voorkomen.

Wanneer er een custom ROM geïnstalleerd is, is de bootloader ook ontgrendelt. Aan de hand van de CTS (Compatibility Test Suite) kan Google bekijken of er ook maar enige aanpassingen zijn toegepast op het systeem. Een unlocked bootloader valt hier ook onder.




